@@grammar::Precedence

start = expression $ ;

expression =
  | And
  | clause
  ;

And = left:clause op:('&' | 'and') right:expression ;

clause =
  | Or
  | term
  ;

Or = left:term op:('|' | 'or') right:clause ;

term =
  | Before
  | event
  ;

Before = left:event op:('.' | '<' | 'before') ~ right:term ;

event =
  | '(' @:expression ')'
  | Not
  | parameter
  ;

Not = op:('-' | 'no' | 'not') ~ right:event ;
parameter = /\w[:\w-]*/ ;
